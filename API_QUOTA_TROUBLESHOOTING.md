# API 사용량 초과 문제 해결 가이드

## 문제 원인

1. **실험 모델 사용**: `gemini-2.0-flash-exp`는 실험 모델로 무료 사용량이 매우 제한적
2. **API 키 할당량 초과**: 무료 티어 일일 한도 초과
3. **계정 제한**: 새 계정이거나 결제 정보 미등록

## 해결 방법

### ✅ 1. 모델 변경 (이미 적용됨)

`app.js` 파일이 이미 `gemini-1.5-flash` 모델로 업데이트되었습니다.
이 모델은 무료 티어에서 다음과 같은 할당량을 제공합니다:

- **분당 요청**: 15회
- **일일 요청**: 1,500회
- **월간 토큰**: 100만 토큰

### 📊 2. API 사용량 확인

1. [Google AI Studio](https://aistudio.google.com/app/apikey)에 접속
2. 본인의 API 키 확인
3. 우측 상단 "Settings" 또는 "Quota" 메뉴에서 사용량 확인

### 🔄 3. 새 API 키 발급 (필요시)

만약 할당량이 초과되었다면:

1. [Google AI Studio](https://aistudio.google.com/app/apikey)에 접속
2. 기존 API 키 삭제
3. "Create API Key" 클릭하여 새 키 발급
4. `app.js` 파일의 1-2번째 줄에서 API 키 교체:

```javascript
// ⚠️ API 키 설정 (여기에 본인의 API 키를 입력하세요)
const GEMINI_API_KEY = '새로운_API_키_여기에_입력';
```

### 💳 4. 결제 정보 등록 (선택사항)

무료 할당량을 넘어서 사용하려면:

1. [Google Cloud Console](https://console.cloud.google.com/)에 접속
2. 프로젝트 생성
3. Billing 정보 등록
4. Generative Language API 활성화

**참고**: 무료 티어만으로도 개인 사용에는 충분합니다!

### ⏰ 5. 사용량 제한 대기

일일 할당량이 초과된 경우:
- 다음 날(한국 시간 기준)까지 대기
- 보통 자정(UTC 기준)에 리셋됨

### 🔍 6. 에러 메시지 확인

브라우저 콘솔(F12)을 열어서 정확한 에러 확인:

```
F12 키 누르기 → Console 탭 → 에러 메시지 확인
```

에러 메시지 예시:
- `RESOURCE_EXHAUSTED`: 할당량 초과
- `INVALID_ARGUMENT`: API 키 문제
- `PERMISSION_DENIED`: 권한 없음

## 모델 비교

| 모델 | 무료 할당량 | 속도 | 품질 |
|------|------------|------|------|
| gemini-1.5-flash | ⭐⭐⭐ 높음 | ⭐⭐⭐ 빠름 | ⭐⭐⭐ 우수 |
| gemini-2.0-flash-exp | ⭐ 매우 낮음 | ⭐⭐⭐ 빠름 | ⭐⭐⭐⭐ 최고 |
| gemini-1.5-pro | ⭐⭐ 보통 | ⭐⭐ 보통 | ⭐⭐⭐⭐ 최고 |

**권장**: `gemini-1.5-flash` (이미 적용됨)

## 자주 묻는 질문

### Q: 왜 갑자기 사용량이 초과되었나요?
A: 실험 모델(`gemini-2.0-flash-exp`)은 무료 할당량이 매우 적습니다. 정식 모델로 변경하면 해결됩니다.

### Q: 돈을 내야 하나요?
A: 아니요! 무료 티어만으로도 개인 사용에는 충분합니다. `gemini-1.5-flash`는 일일 1,500회 요청까지 무료입니다.

### Q: 새 API 키를 발급받으면 할당량이 리셋되나요?
A: 아니요. API 키 자체가 아니라 Google 계정에 할당량이 부여됩니다. 다음 날까지 기다려야 합니다.

### Q: 더 많은 할당량이 필요해요
A: Google Cloud에 결제 정보를 등록하면 Pay-as-you-go로 사용 가능합니다. 하지만 무료 티어로도 충분할 것입니다.

## 문제가 계속되면

1. 브라우저 콘솔(F12)의 에러 메시지를 확인하세요
2. API 키가 올바르게 입력되었는지 확인하세요
3. Google AI Studio에서 API 키가 활성화되어 있는지 확인하세요

---

**팁**: 과도한 테스트를 피하고, 하루에 수백 번 이상의 대화는 자제하세요!
